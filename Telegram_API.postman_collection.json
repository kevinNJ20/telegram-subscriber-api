{
	"info": {
		"_postman_id": "telegram-subscriber-api-2024",
		"name": "Telegram Subscriber API v2.0",
		"description": "Collection compl√®te pour tester l'API Telegram Subscriber.\n\n## üöÄ Configuration\n\n1. Importez cette collection dans Postman\n2. Cr√©ez un environnement avec ces variables :\n   - `base_url` : http://localhost:3000\n   - `telegram_token` : Votre token bot Telegram\n   - `chat_id` : ID de votre canal/groupe (-1001234567890)\n   - `user_id` : ID d'un utilisateur pour les tests de mod√©ration\n\n## üìö Endpoints\n\n- Sant√© : Health checks et infos\n- Chat : Informations sur les chats\n- Messages : Envoi de messages\n- Invitations : Gestion des liens d'invitation\n- Mod√©ration : Bannir, promouvoir des membres\n- Bot : Op√©rations du bot\n\n## üîê Authentification\n\nTous les endpoints n√©cessitent le param√®tre `token` dans l'URL.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "telegram-api"
	},
	"item": [
		{
			"name": "üè• Sant√© & Info",
			"item": [
				{
					"name": "Page d'accueil",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						},
						"description": "Retourne les informations de base de l'API et les liens vers la documentation."
					},
					"response": []
				},
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						},
						"description": "V√©rifie l'√©tat de sant√© de l'API (uptime, environnement, etc.)"
					},
					"response": []
				}
			],
			"description": "Endpoints pour v√©rifier l'√©tat de l'API"
		},
		{
			"name": "üìä Chat - Informations",
			"item": [
				{
					"name": "Nombre de membres",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/members/count?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"members",
								"count"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Obtient le nombre total de membres dans un chat/canal/groupe."
					},
					"response": []
				},
				{
					"name": "Liste des administrateurs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/administrators?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"administrators"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "R√©cup√®re la liste compl√®te des administrateurs avec leurs permissions et informations."
					},
					"response": []
				},
				{
					"name": "Informations du chat",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/info?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"info"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Obtient toutes les informations d√©taill√©es d'un chat (titre, description, nombre de membres, etc.)"
					},
					"response": []
				}
			],
			"description": "R√©cup√©ration d'informations sur les chats Telegram"
		},
		{
			"name": "üí¨ Messages",
			"item": [
				{
					"name": "Envoyer un message simple",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"Bonjour ! Ceci est un message de test envoy√© via l'API üöÄ\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/message?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"message"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Envoie un message texte simple √† un chat."
					},
					"response": []
				},
				{
					"name": "Envoyer un message avec Markdown",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"**Annonce importante** \\n\\n_Nouvelle fonctionnalit√© disponible !_\\n\\n`Code`: Utilisez le code promo HELLO2024\",\n  \"parseMode\": \"Markdown\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/message?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"message"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Envoie un message format√© avec Markdown (gras, italique, code)."
					},
					"response": []
				},
				{
					"name": "Envoyer un message avec HTML",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"<b>Titre en gras</b>\\n\\n<i>Texte en italique</i>\\n\\n<code>Code inline</code>\\n\\n<a href='https://example.com'>Lien cliquable</a>\",\n  \"parseMode\": \"HTML\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/message?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"message"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Envoie un message format√© avec HTML."
					},
					"response": []
				},
				{
					"name": "Envoyer une photo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"media\": \"https://picsum.photos/800/600\",\n  \"message\": \"Regardez cette belle image ! üì∏\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/message?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"message"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Envoie une photo avec une l√©gende optionnelle."
					},
					"response": []
				},
				{
					"name": "R√©pondre √† un message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"Ceci est une r√©ponse √† votre message\",\n  \"replyToMessageId\": 123\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/message?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"message"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Envoie un message en r√©ponse √† un message existant."
					},
					"response": []
				}
			],
			"description": "Envoi de messages texte et m√©dias"
		},
		{
			"name": "üîó Invitations",
			"item": [
				{
					"name": "Cr√©er un lien d'invitation simple",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Lien d'invitation g√©n√©ral\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/invite-link?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"invite-link"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Cr√©e un lien d'invitation simple sans limite."
					},
					"response": []
				},
				{
					"name": "Cr√©er un lien VIP (limit√©)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Acc√®s VIP\",\n  \"memberLimit\": 50\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/invite-link?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"invite-link"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Cr√©e un lien d'invitation limit√© √† un certain nombre de membres."
					},
					"response": []
				},
				{
					"name": "Cr√©er un lien temporaire (expire)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Lien promo 7 jours\",\n  \"expireDate\": {{$timestamp}},\n  \"memberLimit\": 100\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/invite-link?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"invite-link"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Cr√©e un lien d'invitation qui expire apr√®s une date donn√©e."
					},
					"response": []
				},
				{
					"name": "Exporter le lien permanent",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/invite-link/export?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"invite-link",
								"export"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Exporte le lien d'invitation permanent du chat."
					},
					"response": []
				}
			],
			"description": "Cr√©ation et gestion des liens d'invitation"
		},
		{
			"name": "üëÆ Mod√©ration",
			"item": [
				{
					"name": "Bannir un membre (permanent)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"revokeMessages\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/member/{{user_id}}/ban?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"member",
								"{{user_id}}",
								"ban"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Bannit un membre de fa√ßon permanente."
					},
					"response": []
				},
				{
					"name": "Bannir et supprimer messages",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"revokeMessages\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/member/{{user_id}}/ban?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"member",
								"{{user_id}}",
								"ban"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Bannit un membre et supprime tous ses messages."
					},
					"response": []
				},
				{
					"name": "Bannir temporairement",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"untilDate\": {{$timestamp}},\n  \"revokeMessages\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/member/{{user_id}}/ban?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"member",
								"{{user_id}}",
								"ban"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Bannit un membre jusqu'√† une date sp√©cifique."
					},
					"response": []
				},
				{
					"name": "D√©bannir un membre",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/member/{{user_id}}/unban?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"member",
								"{{user_id}}",
								"unban"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Retire le bannissement d'un membre."
					},
					"response": []
				},
				{
					"name": "Promouvoir en admin (toutes permissions)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"canManageChat\": true,\n  \"canPostMessages\": true,\n  \"canEditMessages\": true,\n  \"canDeleteMessages\": true,\n  \"canManageVideoChats\": true,\n  \"canRestrictMembers\": true,\n  \"canPromoteMembers\": true,\n  \"canChangeInfo\": true,\n  \"canInviteUsers\": true,\n  \"canPinMessages\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/member/{{user_id}}/promote?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"member",
								"{{user_id}}",
								"promote"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Promeut un membre en administrateur avec toutes les permissions."
					},
					"response": []
				},
				{
					"name": "Promouvoir en mod√©rateur (permissions limit√©es)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"canManageChat\": false,\n  \"canPostMessages\": false,\n  \"canEditMessages\": false,\n  \"canDeleteMessages\": true,\n  \"canManageVideoChats\": false,\n  \"canRestrictMembers\": true,\n  \"canPromoteMembers\": false,\n  \"canChangeInfo\": false,\n  \"canInviteUsers\": true,\n  \"canPinMessages\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/telegram/chat/{{chat_id}}/member/{{user_id}}/promote?token={{telegram_token}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"chat",
								"{{chat_id}}",
								"member",
								"{{user_id}}",
								"promote"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								}
							]
						},
						"description": "Promeut un membre en mod√©rateur avec permissions limit√©es (supprimer, inviter, √©pingler)."
					},
					"response": []
				}
			],
			"description": "Gestion de la mod√©ration (bannir, promouvoir)"
		},
		{
			"name": "ü§ñ Bot Operations",
			"item": [
				{
					"name": "Obtenir les mises √† jour",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/telegram/updates?token={{telegram_token}}&offset=0&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"telegram",
								"updates"
							],
							"query": [
								{
									"key": "token",
									"value": "{{telegram_token}}",
									"description": "Token du bot Telegram"
								},
								{
									"key": "offset",
									"value": "0",
									"description": "Offset pour la pagination"
								},
								{
									"key": "limit",
									"value": "10",
									"description": "Nombre de mises √† jour √† r√©cup√©rer"
								}
							]
						},
						"description": "R√©cup√®re les derni√®res mises √† jour du bot (messages re√ßus, etc.)"
					},
					"response": []
				}
			],
			"description": "Op√©rations li√©es au bot Telegram"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Script ex√©cut√© avant chaque requ√™te",
					"// Vous pouvez ajouter ici des validations ou des transformations"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Tests automatiques apr√®s chaque requ√™te",
					"pm.test(\"Status code is 200 or 201\", function () {",
					"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
					"});",
					"",
					"pm.test(\"Response has success field\", function () {",
					"    var jsonData = pm.response.json();",
					"    pm.expect(jsonData).to.have.property('success');",
					"});",
					"",
					"pm.test(\"Response time is less than 2000ms\", function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(2000);",
					"});"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "telegram_token",
			"value": "VOTRE_TOKEN_ICI",
			"type": "string"
		},
		{
			"key": "chat_id",
			"value": "-1001234567890",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "123456789",
			"type": "string"
		}
	]
}

